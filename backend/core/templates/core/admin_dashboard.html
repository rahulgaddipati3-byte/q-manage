{% load static %}
<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Admin Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    body { margin:0; font-family: Arial, sans-serif; background:#0b0b0b; color:#fff; }
    .wrap { max-width: 1100px; margin: 30px auto; padding: 0 20px; }
    .card { background: rgba(255,255,255,0.06); border-radius: 16px; padding: 20px; margin: 18px 0; }
    h1 { margin: 20px 0 10px; font-size: 56px; }
    .muted { color: #b7b7b7; }
    a { color:#53a7ff; text-decoration: underline; }
    table { width:100%; border-collapse: collapse; margin-top: 10px; }
    th, td { text-align:left; padding: 10px; border-bottom: 1px solid rgba(255,255,255,0.1); }
    .grid { display:grid; grid-template-columns: 1fr 1fr; gap: 16px; }
    @media(max-width:800px){ .grid{ grid-template-columns:1fr; } h1{ font-size:40px; } }
  </style>
</head>

<body>
  <div class="wrap">

    <div style="margin-bottom:12px;">
      <a href="/users/new/">+ Create Staff User</a>
      <span class="muted" style="margin-left:12px;">Date: {{ today|date:"d/m/Y" }}</span>
    </div>

    <h1>Admin Dashboard</h1>

    <div class="card">
      <h2 style="margin-top:0;">Today Summary</h2>

      <p class="muted">Total Tokens:
        <strong style="color:#fff;">{{ issued|default:0 }}</strong>
      </p>

      <p class="muted">Served Tokens:
        <strong style="color:#fff;">{{ served|default:0 }}</strong>
      </p>

      <p class="muted">Waiting Tokens:
        <strong style="color:#fff;">{{ waiting|default:0 }}</strong>
      </p>

      <p class="muted">Average Wait:
        <strong style="color:#fff;">
          {% if avg_wait %}
            {{ avg_wait }}
          {% else %}
            â€”
          {% endif %}
        </strong>
      </p>
    </div>

    <div class="grid">
      <div class="card">
        <h2 style="margin-top:0;">Quick Links</h2>
        <p><a href="/ui/counter/">Counter Screen</a></p>
        <p><a href="/ui/display/">Customer Display</a></p>
      </div>

      <div class="card">
        <h2 style="margin-top:0;">Per Counter</h2>

        {% if per_counter %}
          <table>
            <thead>
              <tr>
                <th>Counter</th>
                <th>Issued</th>
                <th>Served</th>
                <th>Waiting</th>
              </tr>
            </thead>
            <tbody>
              {% for row in per_counter %}
                <tr>
                  <td>{{ row.counter__code|default:"(unassigned)" }}</td>
                  <td>{{ row.issued|default:0 }}</td>
                  <td>{{ row.served|default:0 }}</td>
                  <td>{{ row.waiting|default:0 }}</td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
        {% else %}
          <p class="muted">No data for today yet.</p>
        {% endif %}
      </div>
    </div>

  </div>
</body>
</html>
